<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.4.xsd">

    <changeSet id="add_test_user_roles_rights" author="13tom13" runOnChange="true">
        <!-- Добавление тестового пользователя -->
        <insert tableName="users" schemaName="main">
            <column name="first_name" value="Иван"/>
            <column name="last_name" value="Петров"/>
            <column name="email" value="test@mail.ru"/>
            <column name="password" value="pass"/>
        </insert>

        <!-- Добавление роли "USER" для тестового пользователя -->
        <insert tableName="users_roles" schemaName="relations">
            <column name="user_id" valueComputed="(SELECT id FROM main.users WHERE first_name = 'Иван')"/>
            <column name="role_id" valueComputed="(SELECT id FROM permissions.roles WHERE name = 'USER')"/>
        </insert>

        <!-- Добавление прав для тестового пользователя -->
        <insert tableName="user_rights" schemaName="relations">
            <column name="user_id" valueComputed="(SELECT id FROM main.users WHERE first_name = 'Иван')"/>
            <column name="right_id" valueNumeric="1"/>
        </insert>
        <insert tableName="user_rights" schemaName="relations">
            <column name="user_id" valueComputed="(SELECT id FROM main.users WHERE first_name = 'Иван')"/>
            <column name="right_id" valueNumeric="2"/>
        </insert>
        <insert tableName="user_rights" schemaName="relations">
            <column name="user_id" valueComputed="(SELECT id FROM main.users WHERE first_name = 'Иван')"/>
            <column name="right_id" valueNumeric="3"/>
        </insert>
        <insert tableName="user_rights" schemaName="relations">
            <column name="user_id" valueComputed="(SELECT id FROM main.users WHERE first_name = 'Иван')"/>
            <column name="right_id" valueNumeric="4"/>
        </insert>

        <!-- Добавление тренировок -->
        <insert tableName="trainings" schemaName="main">
            <column name="name" value="Кардио"/>
            <column name="date" valueDate="2024-04-13"/>
            <column name="duration" value="90"/>
            <column name="calories_burned" value="560"/>
        </insert>
        <insert tableName="trainings" schemaName="main">
            <column name="name" value="Силовая"/>
            <column name="date" valueDate="2024-04-14"/>
            <column name="duration" value="60"/>
            <column name="calories_burned" value="450"/>
        </insert>
        <insert tableName="trainings" schemaName="main">
            <column name="name" value="Гибкость"/>
            <column name="date" valueDate="2024-04-10"/>
            <column name="duration" value="45"/>
            <column name="calories_burned" value="300"/>
        </insert>

        <!-- Добавление тренировок пользователю -->
        <insert tableName="user_trainings" schemaName="relations">
            <column name="user_id" valueComputed="(SELECT id FROM main.users WHERE first_name = 'Иван')"/>
            <column name="training_id" valueComputed="(SELECT id FROM main.trainings WHERE name = 'Кардио')"/>
        </insert>
        <insert tableName="user_trainings" schemaName="relations">
            <column name="user_id" valueComputed="(SELECT id FROM main.users WHERE first_name = 'Иван')"/>
            <column name="training_id" valueComputed="(SELECT id FROM main.trainings WHERE name = 'Силовая')"/>
        </insert>
        <insert tableName="user_trainings" schemaName="relations">
            <column name="user_id" valueComputed="(SELECT id FROM main.users WHERE first_name = 'Иван')"/>
            <column name="training_id" valueComputed="(SELECT id FROM main.trainings WHERE name = 'Гибкость')"/>
        </insert>
    </changeSet>

</databaseChangeLog>
